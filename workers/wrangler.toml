# MemoryRouter Cloudflare Workers Configuration

name = "memoryrouter"
main = "src/index.ts"
compatibility_date = "2024-11-12"
compatibility_flags = ["nodejs_compat"]

# Development settings
[dev]
port = 8787

# KV Namespaces for vector storage and metadata
[[kv_namespaces]]
binding = "VECTORS_KV"
id = "REPLACE_WITH_KV_ID"
preview_id = "REPLACE_WITH_PREVIEW_KV_ID"

[[kv_namespaces]]
binding = "METADATA_KV"
id = "REPLACE_WITH_METADATA_KV_ID"
preview_id = "REPLACE_WITH_PREVIEW_METADATA_KV_ID"

# R2 Bucket for large index storage
[[r2_buckets]]
binding = "VECTORS_R2"
bucket_name = "memoryrouter-vectors"
preview_bucket_name = "memoryrouter-vectors-preview"

# Environment Variables
[vars]
ENVIRONMENT = "development"
DEFAULT_EMBEDDING_MODEL = "text-embedding-3-large"
DEFAULT_EMBEDDING_DIMS = "3072"
HOT_WINDOW_HOURS = "4"
WORKING_WINDOW_DAYS = "3"
LONGTERM_WINDOW_DAYS = "90"

# Production environment
[env.production]
name = "memoryrouter-prod"
[env.production.vars]
ENVIRONMENT = "production"

# Staging environment
[env.staging]
name = "memoryrouter-staging"
[env.staging.vars]
ENVIRONMENT = "staging"
